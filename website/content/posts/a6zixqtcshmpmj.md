+++
title = "New AI Tool: NoteのProseMirror対応HTML変換を作った話｜アイキャッチ画像APIも発見"
date = "2026-02-08T04:50:36.256663"
tags = ["AI", "Tools"]
draft = false
description = "AIツール「New AI Tool: NoteのProseMirror対応HTML変換を作った話｜アイキャッチ画像APIも発見」の活用法を紹介"
canonicalUrl = "https://zenn.dev/shironaganegi/articles/a6zixqtcshmpmj"
+++


【技術解説】Note記事のProseMirrorデータ構造とHTML変換の挑戦：エンジニア視点でのImpact Summary


> 本記事はプロモーションを含みます


## イントロダクション

多くのコンテンツプラットフォームが独自のデータ形式を採用する中、人気プラットフォーム「Note」も例外ではありません。Noteは高度なエディタ体験を実現するために[ProseMirror](https://prosemirror.net/)という構造化ドキュメントエディタフレームワークを採用しています。本記事では、このProseMirror形式のNote記事データを、外部システムで利用可能な高品質なHTMLに変換するための具体的なアプローチと、その過程で発見した**アイキャッチ画像API**について、エンジニアリングの観点から深く掘り下げます。

## 記事データ変換の主要機能と仕組み

メインの機能は、Noteの内部データ構造（JSON形式）を解釈し、標準的なHTMLタグにマッピングすることです。特に挑戦的だったのは、Note特有のブロック要素（引用、埋め込み、見出しレベルなど）を正確に再現することでした。これにはカスタムスキーマの解析が不可欠です。

**1. 複雑なProseMirror JSONの解析:**
ProseMirrorはノードとマークを組み合わせたツリー構造を持ちます。Noteが使用するカスタムノード（例：埋め込みカード、有料記事への導線）を網羅的に定義し、対応するHTMLタグ（`<div>`, `<blockquote>`など）に正確に変換するロジックを構築しました。

**2. アイキャッチ画像APIの発見:**
記事のメタデータ解析中に、公開されている情報が少ない**アイキャッチ画像API**を発見しました。これにより、変換後のHTMLに高解像度のアイキャッチ画像を容易に埋め込むことが可能になり、コンテンツの視覚的な整合性を保つことができます。このAPIの挙動は、[公式なAPIドキュメント](https://help.note.com/m/m399b62615462)には詳細が記載されていないため、エンジニアによるリバースエンジニアリングの知見が活きています。

## エンジニア視点での分析と課題

ProseMirrorを採用するメリットは、構造化された信頼性の高いドキュメントを生成できる点にありますが、外部からデータを抽出・変換する際には大きな壁となります。標準のMarkdown変換に比べ、ProseMirrorのJSONは粒度が細かく、Note特有のカスタムノードの仕様変更に非常に敏感です。

### 日本のエンジニア環境におけるユーティリティ

日本のエンジニア環境において、コンテンツマイグレーションやバックアップのニーズは高まっていますが、公式APIが存在しない、または制限されている場合が多いです。本実装は、クリーンなHTMLが求められる副業プロジェクトやデータ分析基盤への連携において、極めて高いユーティリティを提供します。特に、リッチテキストの内容をそのまま外部DBに保存し、再利用可能な形で保持したいバックエンドエンジニアにとっては、このカスタムパーサーは時間と労力を大幅に節約する鍵となります。既存の汎用JSONパーサーでは対応が難しい、Note特有の複雑なネスト構造を正確に処理する設計が重要でした。




### 👇 エンジニアにおすすめのサービス 👇
[**🌐 独自ドメイン取得なら「お名前.com」。TechTrend Watchも使っています！**](https://www.onamae.com/)




## インストールと利用方法

具体的な実装は、元の記事（NoteのProseMirror対応HTML変換を作った話｜アイキャッチ画像APIも発見）を参照してください。コアの変換ロジックはTypeScriptで記述されており、Node.js環境で動作します。基本的な使用法は、Noteの記事JSONを取得した後、カスタムパーサーに渡すだけです。

```javascript
// サンプルコード（概念）
import { ProseMirrorToHtmlConverter } from './converter';
const noteData = fetchNoteJson(articleId); // 記事IDからJSONを取得
const htmlOutput = new ProseMirrorToHtmlConverter(noteData).toHtml();
console.log(htmlOutput);
```
アイキャッチAPIの利用もシンプルで、記事IDを渡すことで直接画像URLを取得できます。ただし、利用規約に従い、APIの適切な利用を心がける必要があります。

## 利点 (Pros) と 課題 (Cons)

| 項目 | 利点 (Pros) | 課題 (Cons) |
|---|---|---|
| **構造の再現性** | Noteのエディタが持つ詳細な構造（リスト、引用など）を高精度で再現。 | Note側のProseMirrorスキーマが変更された際、メンテナンスが必要になる可能性がある。 |
| **API発見** | アイキャッチ画像を効率的に取得できるため、外部連携の質が向上。 | 公式APIではないため、将来的にアクセスが制限されるリスクがある。 |
| **拡張性** | 必要に応じてカスタムノードレンダラーを追加しやすい設計。 | 初期設定とスキーマ理解に一定の学習コストがかかる。 |

## まとめと今後の展望

NoteのProseMirrorデータからHTMLを生成する試みは、単なるデータ変換以上の、コンテンツの構造と表現に関する深い理解を要求する挑戦でした。このアプローチは、コンテンツの可搬性を高め、エンジニアがデータの自由度を確保するための強力な手段を提供します。今後も、プラットフォームに依存しないコンテンツ管理の重要性は増すでしょう。本研究が、同様の課題に取り組む多くのエンジニアにとっての一助となれば幸いです。


> **おすすめのサービス (PR)**
> 
> 
> [1時間2円から、国内最速・高性能レンタルサーバー【ConoHa WING】](https://px.a8.net/svt/ejp?a8mat=4AX40H+48EZN6+50+5SJACI)
> ![](https://www17.a8.net/0.gif?a8mat=4AX40H+48EZN6+50+5SJACI)







---

> この記事は [Zenn](https://zenn.dev/shironaganegi/articles/a6zixqtcshmpmj) にも投稿されています。
